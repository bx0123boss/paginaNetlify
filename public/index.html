<!DOCTYPE html>
<html>
<head>
  <title>Comprar un Código</title>
</head>
<body>
  <h1>Compra tu código</h1>
  <button id="comprar">Comprar por $X</button>

  <script src="https://js.stripe.com/v3/"></script>
  <script>
    const stripe = Stripe('pk_test_51RjVoePh2xXaeWr6suOAkFHKB4CKgT7FPqz5hV23H8WnSm2FQm3HYf0ctlwf21BOndY8nXF6f3YKtNnUhx22bWSp00oJ8GsfK2'); // Usa tu public key real

    document.getElementById('comprar').addEventListener('click', async () => {
      const res = await fetch('/.netlify/functions/create-checkout-session');
      const data = await res.json();

      if (data.id) {
        stripe.redirectToCheckout({ sessionId: data.id });
      } else {
        alert("Error al crear sesión de pago");
      }
    });
  </script>
</body>
</html>
